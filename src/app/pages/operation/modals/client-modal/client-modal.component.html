<div class="modal-container">
  <div class="modal-header uflex uflex-jbtw">
    <h2 class="headingst"> {{config.data.mode}} cliente</h2>
  </div>
  
  <p-toast position="top-right"></p-toast>
  
  <div class="modal-body">
    <div class="uflex-v gap30 w100">
      <div *ngIf="showError" class="error-message">
        <p>{{errorMessage}}</p>
      </div>

      <div class="uflex-v gap10 ">
        <label for="name" class="fw-bold">Nombre *</label>
        <input type="text" id="name" [(ngModel)]="name" placeholder="Escribe" required 
               [class.error-field]="hasFieldError('name')" />
        <small *ngIf="hasFieldError('name')" class="error-text">{{getFieldError('name')}}</small>
      </div>

      <div class="uflex-v gap10 ">
        <label for="lastname" class="fw-bold">Apellido *</label>
        <input type="text" id="lastname" [(ngModel)]="lastname" placeholder="Escribe" required 
               [class.error-field]="hasFieldError('lastname')" />
        <small *ngIf="hasFieldError('lastname')" class="error-text">{{getFieldError('lastname')}}</small>
      </div>

      <div class="uflex-v gap10 ">
        <label for="email" class="fw-bold">Email</label>
        <input type="email" id="email" [(ngModel)]="email" placeholder="usuario@ejemplo.com" 
               [class.error-field]="hasFieldError('email')" />
        <small *ngIf="hasFieldError('email')" class="error-text">{{getFieldError('email')}}</small>
      </div>

      <div class="uflex-v gap10 ">
        <label for="country" class="fw-bold">País *</label>
        <select id="country" [(ngModel)]="country" required [class.error-field]="hasFieldError('country')">
          <option *ngFor="let country of countries" [value]="country.code">
            {{country.name}} ({{country.prefix}})
          </option>
        </select>
        <small *ngIf="hasFieldError('country')" class="error-text">{{getFieldError('country')}}</small>
      </div>

      <div class="uflex-v gap10 ">
        <label for="number" class="fw-bold">Número de Teléfono *</label>
        <input type="text" id="number" [(ngModel)]="number" 
               [placeholder]="getPhoneValidationMessage()" 
               pattern="[0-9]+" 
               required [class.error-field]="hasFieldError('number')" />
        <small *ngIf="!hasFieldError('number')" class="text-muted">{{getPhoneValidationMessage()}}</small>
        <small *ngIf="hasFieldError('number')" class="error-text">{{getFieldError('number')}}</small>
      </div>

      <div class="uflex-v gap10 ">
        <label for="amount" class="fw-bold">Monto *</label>
        <input type="number" id="amount" [(ngModel)]="amount" placeholder="0.00" min="0" step="0.01" required 
               [class.error-field]="hasFieldError('amount')" />
        <small *ngIf="hasFieldError('amount')" class="error-text">{{getFieldError('amount')}}</small>
      </div>

      <div class="uflex-v gap10 ">
        <label for="issueDate" class="fw-bold">Fecha de Emisión *</label>
        <input type="date" id="issueDate" [(ngModel)]="issueDate" required 
               [class.error-field]="hasFieldError('issueDate')" />
        <small *ngIf="hasFieldError('issueDate')" class="error-text">{{getFieldError('issueDate')}}</small>
      </div>

      <div class="uflex-v gap10 ">
        <label for="dueDate" class="fw-bold">Fecha de Vencimiento *</label>
        <input type="date" id="dueDate" [(ngModel)]="dueDate" required 
               [class.error-field]="hasFieldError('dueDate')" />
        <small *ngIf="hasFieldError('dueDate')" class="error-text">{{getFieldError('dueDate')}}</small>
      </div>

      <div class="uflex-v gap10 ">
        <label for="paymentFrequency" class="fw-bold">Frecuencia de Pago *</label>
        <select id="paymentFrequency" [(ngModel)]="paymentFrequency" required 
                [class.error-field]="hasFieldError('paymentFrequency')">
          <option value="FIN_DE_MES">Fin de Mes</option>
          <option value="QUINCENAL">Quincenal</option>
        </select>
        <small *ngIf="hasFieldError('paymentFrequency')" class="error-text">{{getFieldError('paymentFrequency')}}</small>
      </div>

      <div class="uflex uflex-center gap30 w100 ">
        <button class="btn-primary uflex uflex-center" (click)="guardar()" [disabled]="isLoading">
          <i class="material-symbols-outlined">post_add</i> 
          <span *ngIf="!isLoading">Guardar</span>
          <span *ngIf="isLoading">Guardando...</span>
        </button>
        <button class="btn-whitest uflex uflex-center" (click)="cancelar()" [disabled]="isLoading">
          <i class="material-symbols-outlined">cancel</i> Cancelar
        </button>
      </div>
    </div>
  </div>
</div>


